import{i as k,a as y,o as a,c as i,b as l,t as u,d as b,r as h,e as d,w as x,T as P,f as T,g as f,F as w,h as S,j as B,k as I,p as N,l as C,m as G,v as L,n as ae,q as ce,s as ie}from"./vendor.e5a53810.js";const le=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))_(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&_(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function _(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};le();const c={data:{what:"the EventBus for this app...",kounter:0},$on:(...e)=>k.on(...e),$once:(...e)=>k.once(...e),$off:(...e)=>k.off(...e),$emit:(...e)=>k.emit(...e)};function A(e){return y.get(`https://api.github.com/users/${e}/repos`)}function D(e){return y.get(`https://api.github.com/users/${e}`)}function R(e){return y.get(`https://fire-notes.herokuapp.com/notes/${e}`)}function _e(){return y.get("https://fire-notes.herokuapp.com/keys")}function ue(e){return y.all([A(e),D(e)]).then(t=>({repos:t[0].data,bio:t[1].data,error:!1})).catch(t=>({repos:[],bio:{},error:!0,fault:t}))}function de(e){return y.all([_e(),R(e)]).then(t=>({keys:t[0].data,notes:t[1].data})).catch(t=>({keys:[],notes:[],fault:t}))}const pe={getGithubInfo:ue,getGithubNotes:de,getUserNotes:R,getUserInfo:D,getRepos:A},v={bio:{},repos:[],notes:[],keys:[],tags:[],error:!1,ktype:"warning",username:"",popState:null},F="AppStore.username",he=(e,t)=>e.indexOf(t)!==-1?e.slice(e.indexOf(t)+t.length):null,m=(e,t)=>{v[e]=t;const s="store."+e;c.$emit(s,t)},fe=e=>{const t=e.toLowerCase();m("username",t)},me=e=>{c.$emit("fire-notes:update",e.user,e.note)},V=e=>{if(!v.tags.includes(e)){const t=[...v.tags,e].sort();m("tags",t)}},ge=(e,t)=>e?t&&t!==e?t:e:null,ve=()=>{const e=localStorage.getItem(F),t=he(location.pathname,"/profile/"),s=ge(e,t);console.log(`-- initStore:  ${s}`),m("username",s?s.toLowerCase():null),c.kounter=0,m("ktype","info"),v.username!==null&&(Y(v.username),M(v.username))};let U=0,O=0,j=null;const $e=()=>{const e=c.kounter;U===5?(U=0,c.kounter=e===100?0:e+1):U++,O++},W=()=>{c.kounter=100,m("ktype","danger")},ye=e=>{e.type==="KEYS"&&m("keys",e.keys),e.type==="DATA"&&e.id===v.username&&m("notes",e.values)};let J=0;const be=()=>{O>0&&O!==J?J=O:(clearInterval(j),W())},ke=()=>{j=setInterval(()=>{be()},1e4)},xe=e=>{e!==null&&(console.log(`-- saveUser:  ${e}`),localStorage.setItem(F,e))},M=e=>{console.log(`-- fetchNotes:  ${e}`),m("notes",[]),e&&c.$emit("fire-notes:get",e)},we=(e,t)=>{m("bio",t.bio),m("repos",t.repos),m("error",t.error),v.error||(xe(e),V(e))},Y=e=>{console.log(`-- fetchGithub:  ${e}`),m("bio",{}),m("repos",[]),e?pe.getGithubInfo(e).then(t=>{we(e,t)}):z(null)},q=e=>{fe(e),Y(e),M(e)},Se=e=>{e&&q(e.username)},z=e=>{console.log("-- setPopState: ",e),m("popState",e),Se(e)},H={"init-store":ve,"start-klock":ke,offline:W,"search-for":q,"add-new-note":me,"add-new-tag":V,"new-data":ye,"set-pop-state":z},Q=Object.keys(H);Q.forEach(e=>{c.$on(e,H[e])});const K=Object.keys(v);K.forEach(e=>{c.$on("get:"+e,function(){c.$emit("store."+e,v[e])})});const Ie={api:Q.map(e=>e),data:K.map(e=>"store."+e),get:K.map(e=>"get:"+e)},Ne="wss://fire-notes.herokuapp.com";let $=null;const Ce=e=>{console.log("-- wss: GET ",e),$.send(JSON.stringify({type:"GET",id:e}))},X=()=>{console.log("-- wss: KEYS"),$.send(JSON.stringify({type:"KEYS"}))},Oe=(e,t)=>{console.log("-- wss: POST"),$.send(JSON.stringify({type:"POST",id:e,value:t}))},Ee=()=>{console.log("-- wss: Open"),c.$emit("init-store"),c.$emit("start-klock"),X()},Ue=()=>{console.log("-- wss: Close"),c.$emit("offline")},Ke=e=>{if(e.data==="ping")console.log(e.data),$e();else{console.log("-- wss: "+e.data);const t=JSON.parse(e.data);console.log(t),c.$emit("new-data",t)}},Pe=()=>{console.log("-- wss: Error")},Te=()=>{$=new WebSocket(Ne),$.onopen=e=>{Ee()},$.onclose=e=>{Ue()},$.onmessage=e=>{Ke(e)},$.onerror=e=>{Pe()}};Te();const Z={get:Ce,keys:X,update:Oe},ee=Object.keys(Z);ee.forEach(e=>{c.$on("fire-notes:"+e,Z[e])});const Be={api:ee.map(e=>"fire-notes:"+e)};var p=(e,t)=>{for(const[s,_]of t)e[s]=_;return e};const Ge={props:["salute","message"]},Le={class:"alert alert-danger my-danger",role:"alert"};function Ae(e,t,s,_,n,o){return a(),i("div",Le,[l("strong",null,u(s.salute)+":",1),b(" "+u(s.message),1)])}var De=p(Ge,[["render",Ae],["__scopeId","data-v-5e50e084"]]);const Re={components:{xDanger:De},data(){return{error:!1}},methods:{updateError(e){this.error=e}},created(){c.$on("store.error",this.updateError),c.$emit("get:error")}},Fe={class:"container"};function Ve(e,t,s,_,n,o){const r=h("x-danger");return a(),i("div",Fe,[d(P,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:x(()=>[n.error?(a(),T(r,{key:0,salute:"Error",message:"user does not exist..."})):f("",!0)]),_:1})])}var je=p(Re,[["render",Ve]]);const We={props:["keys"],methods:{keyClick(e){c.$emit("search-for",e)}}},Je=["onClick"];function Me(e,t,s,_,n,o){return a(),i("div",null,[d(B,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:x(()=>[(a(!0),i(w,null,S(s.keys,r=>(a(),i("span",{class:"label label-primary my-key",key:r,onClick:I(g=>o.keyClick(r),["prevent"])},u(r),9,Je))),128))]),_:1})])}var Ye=p(We,[["render",Me],["__scopeId","data-v-6c2dbed7"]]);const qe={components:{xKeys:Ye},data(){return{keys:[]}},methods:{updateKeys(e){this.keys=e}},created(){c.$on("store.keys",this.updateKeys),c.$emit("get:keys")}},ze={class:"container keyContainer"};function He(e,t,s,_,n,o){const r=h("x-keys");return a(),i("div",ze,[d(r,{keys:n.keys},null,8,["keys"])])}var Qe=p(qe,[["render",He],["__scopeId","data-v-0a2c745a"]]);const Xe={props:["tags"],methods:{tagClick(e){c.$emit("search-for",e)}}},Ze={class:"my-tags"},et=["onClick"];function tt(e,t,s,_,n,o){return a(),i("div",Ze,[d(B,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:x(()=>[(a(!0),i(w,null,S(s.tags,r=>(a(),i("span",{class:"label label-info my-tag",key:r,onClick:I(g=>o.tagClick(r),["prevent"])},u(r),9,et))),128))]),_:1})])}var st=p(Xe,[["render",tt],["__scopeId","data-v-547e4914"]]);const ot={props:["salute","message"]},nt={class:"alert alert-success my-success",role:"alert"};function rt(e,t,s,_,n,o){return a(),i("div",nt,[l("strong",null,u(s.salute)+":",1),b(" "+u(s.message),1)])}var at=p(ot,[["render",rt],["__scopeId","data-v-54464734"]]);const ct={components:{xNavigator:st,xSuccess:at},data(){return{tags:[]}},methods:{updateTags(e){this.tags=e}},created(){setTimeout(()=>{c.$emit("add-new-tag","eswat2")},1e3),c.$on("store.tags",this.updateTags),c.$emit("get:tags")}},it={class:"container"};function lt(e,t,s,_,n,o){const r=h("x-success"),g=h("x-navigator");return a(),i("div",it,[d(r,{salute:"Welcome",message:"search for a Github user..."}),d(g,{tags:n.tags},null,8,["tags"])])}var _t=p(ct,[["render",lt]]);const ut={props:["bio"],methods:{chk4num(e){return this.bio[e]!==null&&this.bio[e]>0},chk4(e){return this.bio[e]&&this.bio[e]!=null}}},dt=e=>(N("data-v-0bbc003c"),e=e(),C(),e),pt={class:"app-profile"},ht=dt(()=>l("h3",null,"User Profile",-1)),ft={key:0,class:"list-group-item"},mt=["src"],gt={key:1,class:"list-group-item"},vt={key:2,class:"list-group-item"},$t={key:3,class:"list-group-item"},yt={key:4,class:"list-group-item"},bt={key:5,class:"list-group-item"},kt={key:6,class:"list-group-item"},xt={key:7,class:"list-group-item"},wt={key:8,class:"list-group-item"},St={key:9,class:"list-group-item"},It=b(" Blog: "),Nt=["href"];function Ct(e,t,s,_,n,o){return a(),i("div",pt,[ht,o.chk4("avatar_url")?(a(),i("li",ft,[l("img",{alt:"",src:s.bio.avatar_url,class:"img-rounded img-responsive"},null,8,mt)])):f("",!0),o.chk4("name")?(a(),i("li",gt,"Name: "+u(s.bio.name),1)):f("",!0),o.chk4("login")?(a(),i("li",vt,"Username: "+u(s.bio.login),1)):f("",!0),o.chk4("email")?(a(),i("li",$t,"Email: "+u(s.bio.email),1)):f("",!0),o.chk4("location")?(a(),i("li",yt,"Location: "+u(s.bio.location),1)):f("",!0),o.chk4("company")?(a(),i("li",bt,"Company: "+u(s.bio.company),1)):f("",!0),o.chk4num("followers")?(a(),i("li",kt,"Followers: "+u(s.bio.followers),1)):f("",!0),o.chk4num("following")?(a(),i("li",xt,"Following: "+u(s.bio.following),1)):f("",!0),o.chk4num("public_repos")?(a(),i("li",wt,"Public Repos: "+u(s.bio.public_repos),1)):f("",!0),o.chk4("blog")?(a(),i("li",St,[It,l("a",{href:s.bio.blog,target:"_blank"},u(s.bio.blog),9,Nt)])):f("",!0)])}var Ot=p(ut,[["render",Ct],["__scopeId","data-v-0bbc003c"]]);const Et={props:["bio","repos"],methods:{hasValue(e){return e!==null&&e!==""}},computed:{count(){return this.repos?this.repos.length:0},pCount(){return this.bio?this.bio.public_repos:0}}},Ut=e=>(N("data-v-70e9d1d7"),e=e(),C(),e),Kt=b("User Repos "),Pt={class:"info"},Tt={class:"list-group"},Bt={key:0},Gt=["href"],Lt=["href"],At=Ut(()=>l("i",{class:"fa fa-home my-site"},null,-1)),Dt=[At],Rt={key:1},Ft={key:2,class:"my-grey"};function Vt(e,t,s,_,n,o){return a(),i("div",null,[l("h3",null,[Kt,l("span",Pt,"("+u(o.count)+" of "+u(o.pCount)+")",1)]),l("ul",Tt,[(a(!0),i(w,null,S(s.repos,(r,g)=>(a(),i("li",{class:"list-group-item",key:g},[r.html_url?(a(),i("h4",Bt,[l("a",{href:r.html_url,target:"_blank"},u(r.name),9,Gt),o.hasValue(r.homepage)?(a(),i("a",{key:0,href:r.homepage,target:"_blank"},Dt,8,Lt)):f("",!0)])):(a(),i("h4",Rt,u(r.name)+">",1)),r.description?(a(),i("p",Ft,u(r.description),1)):f("",!0)]))),128))])])}var jt=p(Et,[["render",Vt],["__scopeId","data-v-70e9d1d7"]]);const Wt={props:["user"],data(){return{note:""}},methods:{doSubmit(){this.note!==""&&(c.$emit("add-new-note",{user:this.user,note:this.note}),this.note="")}}},te=e=>(N("data-v-0bdea192"),e=e(),C(),e),Jt={class:"input-group"},Mt=te(()=>l("div",{class:"input-group-addon"},[l("i",{class:"fa fa-chevron-right"})],-1)),Yt={class:"input-group-btn"},qt=["disabled"],zt=b(" Add "),Ht=te(()=>l("i",{class:"fa fa-sticky-note app-sticky"},null,-1)),Qt=[zt,Ht];function Xt(e,t,s,_,n,o){return a(),i("form",null,[l("div",Jt,[Mt,G(l("input",{type:"text",class:"form-control",placeholder:"Note...","onUpdate:modelValue":t[0]||(t[0]=r=>n.note=r)},null,512),[[L,n.note,void 0,{trim:!0}]]),l("span",Yt,[l("button",{class:"btn btn-warning",disabled:n.note==="",onClick:t[1]||(t[1]=I((...r)=>o.doSubmit&&o.doSubmit(...r),["prevent"]))},Qt,8,qt)])])])}var Zt=p(Wt,[["render",Xt],["__scopeId","data-v-0bdea192"]]);const es={props:["notes"]},ts={class:"list-group"};function ss(e,t,s,_,n,o){return a(),i("ul",ts,[(a(!0),i(w,null,S(s.notes,(r,g)=>(a(),i("li",{class:"list-group-item",key:g},u(r),1))),128))])}var os=p(es,[["render",ss]]);const ns={props:["notes","user"],components:{xAddNote:Zt,xNotesList:os}};function rs(e,t,s,_,n,o){const r=h("x-add-note"),g=h("x-notes-list");return a(),i("div",null,[l("h3",null,"Notes for "+u(s.user),1),d(r,{user:s.user},null,8,["user"]),d(g,{notes:s.notes},null,8,["notes"])])}var as=p(ns,[["render",rs]]);const cs={props:["bio","repos","notes","user"],components:{xUserProfile:Ot,xRepos:jt,xNotes:as}},is={class:"row app-profile"},ls={class:"col-md-4"},_s={class:"col-md-4"},us={class:"col-md-4"};function ds(e,t,s,_,n,o){const r=h("x-user-profile"),g=h("x-repos"),E=h("x-notes");return a(),i("div",is,[l("div",ls,[d(r,{bio:s.bio},null,8,["bio"])]),l("div",_s,[d(g,{bio:s.bio,repos:s.repos},null,8,["bio","repos"])]),l("div",us,[d(E,{notes:s.notes,user:s.user},null,8,["notes","user"])])])}var ps=p(cs,[["render",ds],["__scopeId","data-v-21906262"]]);const hs={data(){return{bio:{},repos:[],notes:[],user:"",kount:0,load:!1}},components:{xProfile:ps},computed:{hasBio(){return Object.keys(this.bio).length>0},keyFor(){return this.user+this.kount}},methods:{updateBio(e){this.kount+=1,this.bio=e},updateRepos(e){this.repos=e},updateNotes(e){this.notes=e},updateUser(e){this.user=e}},watch:{hasBio(e){const t=this;setTimeout(()=>{t.load=e},50)}},created(){c.$on("store.bio",this.updateBio),c.$on("store.repos",this.updateRepos),c.$on("store.notes",this.updateNotes),c.$on("store.username",this.updateUser),c.$emit("get:bio"),c.$emit("get:repos"),c.$emit("get:notes"),c.$emit("get:username")}},fs={class:"container"};function ms(e,t,s,_,n,o){const r=h("x-profile");return a(),i("div",fs,[d(P,{"enter-active-class":"animated fadeInUpBig","leave-active-class":"animated fadeOutDownBig",mode:"out-in"},{default:x(()=>[n.load?(a(),T(r,{bio:n.bio,repos:n.repos,notes:n.notes,user:n.user,key:o.keyFor},null,8,["bio","repos","notes","user"])):f("",!0)]),_:1})])}var gs=p(hs,[["render",ms]]);const vs={data(){return{bus:{},kounter:0,ktype:"info"}},computed:{klass(){return"progress-bar-"+this.ktype},style(){return{width:this.kounter+"%"}}},methods:{updateKtype(e){this.ktype=e}},watch:{"bus.kounter":{handler(e){this.kounter=e},deep:!0}},created(){const e=this;setTimeout(()=>{e.kounter=100},1e3),this.bus=c,c.$on("store.ktype",this.updateKtype),c.$emit("get:ktype")}},$s={class:"progress my-bar",style:{}};function ys(e,t,s,_,n,o){return a(),i("div",$s,[l("div",{role:"progressbar",class:ae(["progress-bar",o.klass]),style:ce(o.style)},null,6)])}var bs=p(vs,[["render",ys],["__scopeId","data-v-0232fee7"]]);const ks={props:["username"],data(){return{user:""}},methods:{doSubmit(){this.user!==""&&c.$emit("search-for",this.user)}},watch:{username(e){this.$refs.input.value=e,this.user=e}}},se=e=>(N("data-v-2eefeb19"),e=e(),C(),e),xs={class:"col-sm-12"},ws={class:"form-group col-sm-12"},Ss=se(()=>l("a",{href:"https://github.com/eswat2/git-notes",target:"_blank"},[l("i",{class:"fa fa-github-square my-repo"})],-1)),Is={class:"input-group"},Ns=se(()=>l("div",{class:"input-group-addon"},[l("i",{class:"fa fa-search"})],-1)),Cs={class:"input-group-btn"},Os=["disabled"];function Es(e,t,s,_,n,o){return a(),i("div",xs,[l("form",null,[l("div",ws,[Ss,l("div",Is,[Ns,G(l("input",{type:"text",class:"form-control lower",placeholder:"Username...",ref:"input","onUpdate:modelValue":t[0]||(t[0]=r=>n.user=r)},null,512),[[L,n.user,void 0,{trim:!0}]]),l("span",Cs,[l("button",{class:"btn btn-primary",disabled:n.user==="",onClick:t[1]||(t[1]=I((...r)=>o.doSubmit&&o.doSubmit(...r),["prevent"]))},"Search Github",8,Os)])])])])])}var Us=p(ks,[["render",Es],["__scopeId","data-v-2eefeb19"]]);const Ks={components:{xSearchGithub:Us},data(){return{user:""}},methods:{updateUser(e){this.user=e}},created(){c.$on("store.username",this.updateUser),c.$emit("get:username")}},Ps={class:"navbar navbar-default my-nav"},Ts={class:"col-sm-7 col-sm-offset-2 my-wrap"};function Bs(e,t,s,_,n,o){const r=h("x-search-github");return a(),i("nav",Ps,[l("div",Ts,[d(r,{username:n.user},null,8,["username"])])])}var Gs=p(Ks,[["render",Bs],["__scopeId","data-v-0a2d5d32"]]);const Ls={components:{xErrorContainer:je,xKeysContainer:Qe,xNavigatorContainer:_t,xProfileContainer:gs,xProgressContainer:bs,xSearchContainer:Gs},data(){return{actions:[],fireNotes:[],eventBus:null}},created(){this.actions=Ie,this.fireNotes=Be,this.eventBus=c}},As={class:"app"},Ds={className:"main-container"};function Rs(e,t,s,_,n,o){const r=h("x-search-container"),g=h("x-progress-container"),E=h("x-keys-container"),oe=h("x-error-container"),ne=h("x-navigator-container"),re=h("x-profile-container");return a(),i("div",As,[l("div",Ds,[d(r),d(g),d(E),d(oe),d(ne),d(re)])])}var Fs=p(Ls,[["render",Rs],["__scopeId","data-v-c484d6f2"]]);const Vs=e=>{const t=e.state&&e.state.username?e.state.username:null;console.log(`-- popstate:  ${t}`),c.$emit("set-pop-state",{username:t})};window.addEventListener("popstate",Vs);ie(Fs).mount("#app");
